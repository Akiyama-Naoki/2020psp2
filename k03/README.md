# 課題3 レポート

aa83988848 薗田光太郎

## 課題

住んでるA県で生まれたジモティー20代の男性の平均と分散が分かっているので，典型的なA県生まれの20代男性の身長を新たに捏造することが可能である．5人分捏造してみよ．

`int rand(void)`は`0`〜`RAND_MAX`の疑似乱数（整数）を1つ生成する関数である．この関数は整数しか出力されないので，`0`から`1`の間の一様乱数を生成するために，下のような関数 `double r_unif(void)`を作成した．

また，詳細は省くがこの一様乱数生成関数 `r_unif`を用いて，平均0，分散1の標準正規乱数生成関数 `double r_stdnorm(void)`を作成できる(box-muller法)．
この`r_stdnorm`関数を用いてA県の男性5人の身長を新たに捏造せよ．


  ```{c}
  #include <stdlib.h>
  #include <math.h>

  double r_unif(void)
  {
    return (double)(rand()+1)/(RAND_MAX+2);
  }
  
  double r_stdnorm(void)
  {  
    return sqrt( -2.0*log(r_unif()) ) * sin( 2.0*M_PI*r_unif() );
  } 
  ```

### コマンドライン入力

また，今回のプログラムは，実行してから必要な値を入力するのではなく，

```
./k03 170.8 5.43 5
```

などと，実行時に引数でそれらを指定するようにする．そのために，main関数の引数をvoidではなく，

```
int main(int argc, char* argv[])
```

などとする．こうすると，argcに実行時のコマンド行にあるスペースで区切られた文字列の数（今の例だと`4`）が入り，
`argv[0]`には，`"./k03"`，`argv[1]`には，`"170.8"`，...が格納される．`sscanf`でこれらの文字列から数値を読み取ればよい．

### マクロ定義による分岐

コード中のコメントアウトするとき，`/*`と`*/`で囲む，もしくは `//`で行コメントアウトが使えるが，
他の方法も知っておくとよい．

1.`if(0)`で囲んだ分岐ブロックは，コメントアウトと同様に常にスキップされる．
2.`#if 0`~`#endif`で囲んだブロックは，プリプロセスでスキップされる．

違いは，前者の場合にはコード解析されるが，後者はコード解析されない．前者の場合はコメントアウトされていても，ブロックの中の文法が正しいことが要求される．

いずれにせよ，if分岐がコメントアウトに使えるということだが，逆に上述の2のようなマクロは分岐に使うことができるわけで，コンパイル時に"-DTEST"を付けたときだけprintfさせたいときは，

```
#ifdef TEST
 printf("%d\n",x);
#endif
```

のような行を加えることができる．


## ソースコードの説明

- l.23,l.24,l.25 argvに格納された数値を読み込む
- l.37 値を捏造

## 入出力結果

以下は例です． コンパイルするときに`-DCONST_SEED`をつけるとこうなります．

```
============================================
template mean: 170.8
template standard deviation: 5.43
Num of dummy data: 5
============================================
162.20
171.29
175.88
168.59
166.74
```
============================================
template mean: 170.8
template standard deviation: 5.43
Num of dummy data: 5
============================================
169.22
170.89
171.74
170.39
170.05

コンパイル時に`-DCONST_SEED`をつけない場合を以下に示す．
============================================
template mean: 170.8
template standard deviation: 5.43
Num of dummy data: 5
============================================


## 修正履歴

[comment #20200521]
- `r_stdnorm`関数は，**標準正規分布**（平均0，分散1の正規分布）の分布から値をランダムに出力します．なので，`dummy = mu + r_stdnorm();`で得られるdummyは，平均は`mu`になるけれど，分散が1になってしまいます．現在の出力結果を見ても，捏造された値は，170.8の周りの±2　（90%くらいが標準偏差の2倍以内）くらいに入っていませんか？分散は5.43なので，捏造される値はもっと広い値です．
  - 平均 mu 標準偏差 sigma のデータ x を平均 0 標準偏差 1のデータyに変換する操作は標準化といい，y = (x-mu)/sigma　です．
  - 今回は，逆ですよね．平均 0 標準偏差 1 のデータ y　を平均 mu 標準偏差 sigma　のデータ x に変換するので，x = ... （どのように変換すればいいですか？）　
- `-DCONST_SEED`をつけると，乱数の選び方が固定（いつも同じ値）になります．5個の捏造データが何回やっても同じ組み合わせになります．
  - つけない場合は，何も出ないのではなく，プログラムを動かした時刻に応じて毎回違う組み合わせが出力されます．
  - そうしたいので，main関数の`#ifdef`と`#endif`の行は消してください．
    - その上で，`gcc -o k03 k03.c -DCONST_SEED`でコンパイルしたときの実行結果と，`gcc -o k03 k03.c`でコンパイルしたときの実行結果をレポートに書いてください．
  - 